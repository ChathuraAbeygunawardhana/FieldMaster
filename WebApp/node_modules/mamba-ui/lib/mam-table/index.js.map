{"version":3,"sources":["mam-table/index.jsx"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","MamTable","props","state","getPaginationConfig","bind","getColumnsConfig","getDataSource","columns","pagination","assign","showQuickJumper","showSizeChanger","pageSizeOptions","serialNo","newColumns","map","item","render","Array","isArray","actions","actionsLen","text","record","ac","name","onClick","popconfirm","btnNode","undefined","confirm","rest","columnTitle","serialNoColumn","title","dataIndex","key","width","dataSource","newData","startIndex","index","React","Component"],"mappings":"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","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport Table from 'antd/es/table';\nimport Divider from 'antd/es/divider';\nimport Popconfirm from 'antd/es/popconfirm';\nimport isBoolean from 'lodash/isBoolean';\nimport getComponentProps from '../_utils/getComponentProps';\nexport default class MamTable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.getPaginationConfig = this.getPaginationConfig.bind(this);\n        this.getColumnsConfig = this.getColumnsConfig.bind(this);\n        this.getDataSource = this.getDataSource.bind(this);\n        this.columns = this.getColumnsConfig();\n    }\n    getPaginationConfig() {\n        const { pagination } = this.props;\n        if (isBoolean(pagination) && !pagination) {\n            return pagination;\n        }\n        return Object.assign({ showQuickJumper: true, showSizeChanger: true, pageSizeOptions: ['10', '20', '30', '40', '50'] }, getComponentProps(pagination));\n    }\n    getColumnsConfig() {\n        const { serialNo, columns } = this.props;\n        let newColumns = columns.map(item => {\n            let render = item.render;\n            if (!('render' in item) && 'actions' in item && Array.isArray(item.actions)) {\n                const actionsLen = item.actions.length;\n                render = function (text, record) {\n                    return item.actions.map((ac, i) => {\n                        const { name, onClick, popconfirm } = ac;\n                        let btnNode = (<a key={name} onClick={onClick && !popconfirm ? () => onClick(text, record) : undefined}>\n                                {name}\n                            </a>);\n                        if (popconfirm) {\n                            const { confirm } = popconfirm, rest = __rest(popconfirm, [\"confirm\"]);\n                            btnNode = (<Popconfirm {...rest} onConfirm={confirm ? () => confirm(record) : undefined} key={name}>\n                                    {btnNode}\n                                </Popconfirm>);\n                        }\n                        return [\n                            btnNode,\n                            i != actionsLen - 1 && <Divider key={`divider_${i}`} type=\"vertical\"/>,\n                        ];\n                    });\n                };\n            }\n            return Object.assign(Object.assign({}, item), { render });\n        });\n        if (serialNo) {\n            const { columnTitle = '序号' } = getComponentProps(serialNo);\n            const serialNoColumn = {\n                title: columnTitle,\n                dataIndex: 'serialNo',\n                key: 'serialNo',\n                width: 70,\n            };\n            newColumns = [serialNoColumn, ...newColumns];\n        }\n        return newColumns;\n    }\n    getDataSource() {\n        const { serialNo, dataSource = [] } = this.props;\n        let newData = dataSource;\n        if (serialNo) {\n            const { startIndex = 1 } = getComponentProps(serialNo);\n            newData = dataSource.map((item, index) => {\n                return Object.assign(Object.assign({}, item), { serialNo: index + startIndex });\n            });\n        }\n        return newData;\n    }\n    render() {\n        const rest = __rest(this.props, []);\n        return (<Table {...rest} columns={this.columns} dataSource={this.getDataSource()} pagination={this.getPaginationConfig()}/>);\n    }\n}\n"],"file":"index.js"}